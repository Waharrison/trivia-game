<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <div class="container">
        <div class="jumbotron text-center">
            <h1>Trivia Game</h1>
        </div>
        <div class="btnContainer">
            <button type="button" class="btn btn-default btn-lg btn-primary strtbutton">START</button>
        </div>
    </div>

    <script type="text/javascript">
        // question and answer objects

        var questions = {
            q1: ["What TV show has the character Michael Scott?"],

        };
        var answers = [{
            1: "Parks & Recreation",
            2: "30 Rock",
            3: "The Office", // right answer
            4: "Friends"
        }]

        //counter variables
        var isCorrect = false;
        var questCnt = 0;
        var time = 30;
        var answerCount = 0;
        var wrongAnswers = 0;
        var intervalId;

        // used to rest the time
        var interval;

        //functions

        function startGame() {

        }

        function gamePlay() {
            $(".strtButton").on("click", function () {

                $(".strtButton").hide();
                timeCount();
                quest1();
                chooseCheckAnswer();
            })

            function timeCount() {
                time = 30;
                interval = setInterval(timeremaing, 1000);

                $(".btnContainer").append("div class='timeRem'>"
                    + 'Time Remaining: ' +
                    '<div class ="timerCountDown"></div>' + "</div>")
            }

        }
        //print time remaining to the dom and once it hits 0 it stops
        function timeRemaining() {
            time--;

            //prints time remaining
            $('.timerCountDown').text(time + 'seconds');
            //test/debug
            console.log(time);

            if (time === 0) {
                console.log("time = " + time);
                //stops time at 0.....
                clearInterval(interval);
                //removes button answers
                $('button').remove()
                //removed question
                $(".questionInput").remove();
                //displays time is up
                $('btnContainer').append('<div class="timeIsUp">Time is up </div>')
            }
        }

        function dispAns() {
            //displays correct answer, counter 1 = question = 1,
            if (questCnt === 1 && isCorrect === false) {
                //tracks
                wrongCount++;
                var newDiv = $("<div class='corAnsw'>");
                correctAnswer = newDiv.text("Wrong Answer" + answer[0]);
                //Removes the correct answer after 5 seconds
                //Removes the time remaining calls the time remaining function to start the time again

                setTimeout(function () {
                    $('div'.remove('.corAnsw'));
                    $("div").remove(".timeRem");
                    $('div').remove('timeIsUp');

                    //display end game screen
                    endgame();
                    }, 2000);
            }
            else if (questCnt === 2 && isCorrect === true) {
                //track right answers
                answerCount++;
                var newDiv = $('<div class="corAnsw">');
                    correctAnswer = newDiv.text("Right Answer!!");
                    $('.btnContainer').append(correctAnswer);
                    //removes the correct answer after 5 seconds
                    //removes the time remaining then calls the time remaining function to start the timer again
                        setTimeout(function()
                        {
                            isCorrect = false;
                            $('div'.remove('.corAnsw'));
                            $('div').remove('.timeRem');
                            $(".div").remove('timeIsUp');

                            endGame();
                        }, 2000);
            }
              //test Debug
        console.log('question Counter = ' + questCnt)
        }
      

        function quest1() {

            // var newDiv = $("<div class= 'quest q1'>");
            //     newDiv.html('testing');

            //     $("btnContainer").append(newDiv);
            //     intervalId = setInterval(timeCount, 1000);

            questCnt++;
            $(".btnContainer").append('<div class= "questionInput">' + question.q1 + '</div>)' +
                "<button class='answerVal' value=0>" + answers[0] + '</button>' +
                "<button class='answerVal' value=0>" + answers[1] + '</button>' +
                "<button class='answerVal' value=0>" + answers[2] + '</button>' +
                "<button class='answerVal' value=0>" + answers[3] + '</button>')

        }

        function endGame() {
            $(".btnContainer").append("<div class='gameOver'> All done!!</div>" +
                "<div class='gameOver'>Correct:" + answerCount +
                     "</div>" + "div class='gameOver'>" + wrongCount + "</div>")
        }
      
    </script>
</body>

</html>